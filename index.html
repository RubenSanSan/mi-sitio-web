<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mapa Naval Action - Español</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header id="main-header">
        <div class="toolbar-left">
            <button id="battle-menu-toggle" title="Inteligencia de Batalla">
                <img src="imagenes/batalla.png" alt="Batalla">
            </button>
            <button id="trade-menu-toggle" title="Inteligencia Comercial">
                <img src="imagenes/comercio.png" alt="Comercio">
            </button>
            <button id="crafting-menu-toggle" title="Inteligencia de Crafteo">
                <img src="imagenes/crafteo.png" alt="Crafteo">
            </button>
            <div id="port-search-container">
                <input type="text" id="port-search-input" placeholder="Buscar puerto...">
                <div id="port-search-results"></div>
            </div>
        </div>

        <img src="imagenes/cabeza.png" alt="Logo del Mapa" id="header-logo">

        <div class="toolbar-right">
            <button id="wind-predictor-toggle" title="Predictor de Viento">
                <img src="imagenes/compas.png" alt="Compás">
            </button>
            <button id="stats-toggle" title="Estadísticas del Servidor">
                <img src="imagenes/estadisticas.png" alt="Estadísticas">
            </button>
        </div>
    </header>

    <nav id="battle-menu" class="side-panel hidden">
        <div id="battle-intelligence">
            <h4>Inteligencia de Batalla</h4>
            <div id="raid-alerts"></div>
            <div id="spanish-defenses" class="battle-section">
                <h5>Nuestras Defensas</h5>
                <ul id="spanish-defenses-list"></ul>
            </div>
            <div id="attack-targets" class="battle-section">
                <h5>Próximos Objetivos</h5>
                <ul id="attack-targets-list"></ul>
            </div>
        </div>
    </nav>
    
    <nav id="trade-menu" class="side-panel hidden">
        <div id="product-finder">
            <h4>Buscador de Productos</h4>
            <input type="text" id="product-finder-input" placeholder="Buscar cualquier producto...">
            <div id="product-finder-results"></div>
        </div>

        <div id="top-profit-container">
            <h4>Top 10 Beneficios Globales</h4>
            <ol id="top-profit-list"></ol>
        </div>
        <div id="route-finder">
            <h4>Calculadora de Rutas</h4>
            <input type="text" id="route-finder-input" placeholder="Buscar producto para ruta...">
            <div id="route-finder-results"></div>
        </div>
    </nav>
    
    <nav id="crafting-menu" class="side-panel hidden">
        <div id="recipe-finder">
            <h4>Buscador de Recetas</h4>
            <input type="text" id="recipe-finder-input" placeholder="Buscar receta...">
            <div id="recipe-finder-results"></div>
        </div>
        <div id="special-ports">
            <h4>Puertos Especiales de Producción</h4>
            <ul id="special-ports-list"></ul>
        </div>
    </nav>

    <nav id="stats-menu" class="side-panel hidden">
        <h3>Estadísticas del Servidor</h3>
        <div id="stats-content-wrapper">
            <div class="stats-section">
                <h4>Dominio de Naciones</h4>
                <ul id="nation-dominance-list"></ul>
            </div>
            <div class="stats-section">
                <h4>Centros de Comercio</h4>
                <ol id="trade-hubs-list"></ol>
            </div>
            <div class="stats-section">
                <h4>Clanes Dominantes</h4>
                <ol id="clan-power-list"></ol>
            </div>
        </div>
    </nav>

    <div id="map-container">
        <canvas id="map-canvas"></canvas>
    </div>

    <div id="tooltip"></div>

    <div id="portPanel" class="port-panel hidden">
        <h3 id="port-panel-title">Nombre del Puerto</h3>
        <button id="close-panel-button" class="close-button">×</button>
        <div class="tabs">
            <button data-tab="battle" class="tab-button active">Batalla</button>
            <button data-tab="trade" class="tab-button">Comercio</button>
        </div>
        <div id="battle" class="tab-content">
            <p><strong>Clan:</strong> <span id="battleClan"></span></p>
            <p><strong>Próxima batalla:</strong> <span id="battleCountdown"></span></p>
            <p><strong>Última batalla:</strong> <span id="lastBattleDate"></span></p>
            <hr>
            <p><strong>Límite de BR:</strong> <span id="battle-br-limit"></span></p>
            <p><strong>Puntos de Puerto:</strong> <span id="port-points"></span></p>
            <p><strong>Ventana de Batalla:</strong> <span id="battle-window"></span></p>
            <strong>Defensas:</strong>
            <ul id="port-defenses"></ul>
        </div>
        <div id="trade" class="tab-content hidden">
            <div id="trade-sorters">
                <button data-sort="name">Nombre</button>
                <button data-sort="quantity">Cantidad</button>
                <button data-sort="buy">Compra</button>
                <button data-sort="sell">Venta</button>
            </div>
            <ul id="tradeItems"></ul>
            <div id="trade-summary">
                <p>Impuesto: <span id="trade-tax"></span></p>
                <p>Volumen Total: <span id="trade-volume"></span></p>
            </div>
        </div>
    </div>
    
    <div id="materialPanel" class="port-panel hidden">
        <h3 id="material-panel-title">Materiales para: Receta</h3>
        <button id="close-material-panel-button" class="close-button">×</button>
        <div id="material-list-container">
        </div>
    </div>

    <div id="modal-overlay" class="hidden"></div>

    <div id="wind-predictor-modal" class="modal hidden">
        <button id="close-wind-predictor-button" class="close-button">×</button>
        <h4>Predictor de Viento</h4>
        <div class="wind-predictor-content">
            <div class="wind-controls">
                <div class="input-group">
                    <label for="current-server-time">Hora Actual Servidor (UTC):</label>
                    <input type="time" id="current-server-time" value="12:00">
                </div>
                <div class="input-group">
                    <label for="current-wind-direction">Dirección Actual del Viento:</label>
                    <select id="current-wind-direction">
                        <option value="N">Norte (N)</option>
                        <option value="NbE">Norte por Este (NbE)</option>
                        <option value="NNE">Nornoreste (NNE)</option>
                        <option value="NEbN">Noreste por Norte (NEbN)</option>
                        <option value="NE">Noreste (NE)</option>
                        <option value="NEbE">Noreste por Este (NEbE)</option>
                        <option value="ENE">Estenoreste (ENE)</option>
                        <option value="EbN">Este por Norte (EbN)</option>
                        <option value="E">Este (E)</option>
                        <option value="EbS">Este por Sur (EbS)</option>
                        <option value="ESE">Estesureste (ESE)</option>
                        <option value="SEbE">Sureste por Este (SEbE)</option>
                        <option value="SE">Sureste (SE)</option>
                        <option value="SEbS">Sureste por Sur (SEbS)</option>
                        <option value="SSE">Sursureste (SSE)</option>
                        <option value="SbE">Sur por Este (SbE)</option>
                        <option value="S">Sur (S)</option>
                        <option value="SbW">Sur por Oeste (SbW)</option>
                        <option value="SSW">Sursuroeste (SSW)</option>
                        <option value="SWbS">Suroeste por Sur (SWbS)</option>
                        <option value="SW">Suroeste (SW)</option>
                        <option value="SWbW">Suroeste por Oeste (SWbW)</option>
                        <option value="WSW">Oestesuroeste (WSW)</option>
                        <option value="WbS">Oeste por Sur (WbS)</option>
                        <option value="W">Oeste (W)</option>
                        <option value="WbN">Oeste por Norte (WbN)</option>
                        <option value="WNW">Oestenoroeste (WNW)</option>
                        <option value="NWbW">Noroeste por Oeste (NWbW)</option>
                        <option value="NW">Noroeste (NW)</option>
                        <option value="NWbN">Noroeste por Norte (NWbN)</option>
                        <option value="NNW">Nornoroeste (NNW)</option>
                        <option value="NbW">Norte por Oeste (NbW)</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="future-prediction-time">Predecir para la Hora (UTC):</label>
                    <input type="time" id="future-prediction-time" value="13:00">
                </div>
                <button id="calculate-wind-button">Calcular Predicción</button>
            </div>
            <div id="wind-prediction-result">
                <p class="wind-label">VIENTO DESDE</p>
                <div class="compass-container">
                    <div id="wind-arrow-container">
                        <div id="wind-arrow"></div>
                    </div>
                </div>
                <p>
                    <span id="predicted-wind-text">--</span>
                    <span id="predicted-wind-degrees"></span>
                </p>
                <p class="wind-label-inverse">RUMBO (VA HACIA)</p>
                <p>
                    <span id="predicted-inverse-text">--</span>
                    <span id="predicted-inverse-degrees"></span>
                </p>
            </div>
        </div>
    </div>

    <div id="copyright-footer">
        &copy; Copyright hecho por Ruben San San
    </div>

    <script src="script.js"></script>
</body>
</html>